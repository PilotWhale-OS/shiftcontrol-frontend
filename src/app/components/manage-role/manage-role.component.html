@if (manageData$ | async; as manageData) {

  <div class="card flex flex-col gap-lg h-fit" [style.order]="getOrder(manageData.role)" [ngClass]="{
    'success': manageData.role === undefined,
  }">
    <div class="flex flex-row gap-sm items-center">
      @if (manageData.role === undefined){
        <div class="badge success w-fit">
          <fa-icon [icon]="icons.role" />
          Create Volunteer Role
        </div>
      }
      @else {
        <div class="badge hint w-fit">
          <fa-icon [icon]="icons.role" />
          Volunteer Role
        </div>
      }

      <span class="grow"></span>

      @if (manageData.role === undefined) {
        <xsb-input-button content="Create" size="text" (click)="save(manageData.role, manageData.plan)" />
      }
      @else {
        <xsb-input-button content="Delete" size="text" (click)="showDeleteConfirm = true" />
        <xsb-input-button content="Save" size="text" (click)="save(manageData.role, manageData.plan)" />
      }

    </div>

    @if(manageData.role === undefined) {
      <span>Create a new role to manage volunteer sign-up requirements for shift positions.</span>
    }

    <div class="grid grid-cols-2 gap-lg">
      <div class="flex flex-col gap-sm">
        <small><fa-icon [icon]="icons.name" class="pr-sm" />Role Name</small>
        <xsb-input-text #name
                        [formControl]="form.controls.name"
                        [xsb-typed]="[name, form.controls.name]"
                        name="role-manage-name" placeholder="Role name"
        />
      </div>

      <div class="flex flex-col gap-sm">
        <small><fa-icon [icon]="icons.rewards" class="pr-sm" />Reward Points per minute</small>
        <xsb-input-number #rewardPointsPerMinute
                          [formControl]="form.controls.rewardPointsPerMinute"
                          [xsb-typed]="[rewardPointsPerMinute, form.controls.rewardPointsPerMinute]"
                          name="role-manage-points" placeholder="Reward Points"
        />
      </div>

      <div class="flex flex-col gap-sm col-span-2">
        <small><fa-icon [icon]="icons.description" class="pr-sm" />Description</small>
        <xsb-input-text #description
                        [formControl]="form.controls.description"
                        [xsb-typed]="[description, form.controls.description]"
                        name="role-manage-name" placeholder="Role description"
        />
      </div>
    </div>

  </div>

  @if (showDeleteConfirm && manageData.role !== undefined){
    <xsb-dialog action="danger" danger="Delete Role" (closeDialog)="showDeleteConfirm = false; $event === 'danger' && delete(manageData.role)">
      <ng-container dialog-header>
        <h1>Delete Role "{{manageData.role.name}}"</h1>
      </ng-container>

      <ng-container dialog-body>
        <p>
          Are you sure you want to delete this role?<br>
          This cannot be made undone.
        </p>
      </ng-container>
    </xsb-dialog>
  }
}
